{% extends "contacts/base.html" %}
{% load contacts_extras %}
{% block content %}

    <div class="container">
        <div class="row">

            <div class="col-md-12">
                <h4>Contacts ({{ page_obj.paginator.count }})</h4>
                <div class="table-responsive">

                    <table id="mytable" class="table table-bordred table-striped">

                        <thead>
                            <th>Id</th>
                            <th>City
                                <a href="?page={{ page_obj.number }}&orderby=city&order=asc" class="fas fa-sort-alpha-down ml-2"
                                    {% if orderby == 'city' and order == 'asc' %}
                                        style="color: black"
                                    {% else %}
                                        style="color: gray"
                                    {% endif %}>
                                </a>
                                <a href="?page={{ page_obj.number }}&orderby=city&order=desc" class="fas fa-sort-alpha-up ml-2"
                                   {% if orderby == 'city' and order == 'desc' %}
                                        style="color: black"
                                    {% else %}
                                        style="color: gray"
                                    {% endif %}>
                                </a>
                            </th>
                            <th>Street
                                <a href="?page={{ page_obj.number }}&orderby=street&order=asc" class="fas fa-sort-alpha-down ml-2""
                                    {% if orderby == 'street' and order == 'asc' %}
                                        style="color: black"
                                    {% else %}
                                        style="color: gray"
                                    {% endif %}>
                                </a>
                                <a href="?page={{ page_obj.number }}&orderby=street&order=desc" class="fas fa-sort-alpha-up ml-2""
                                    {% if orderby == 'street' and order == 'desc' %}
                                        style="color: black"
                                    {% else %}
                                        style="color: gray"
                                    {% endif %}>
                                </a>
                            </th>
                            <th>Building Number</th>
                            <th>Flat Number</th>
                            <th>Inhabitants</th>
                        </thead>

                        <tbody>
                            {% for address in addresses %}
                                <tr>
                                    <td>{{ address.pk }} </td>
                                    <td>{{ address.city }} </td>
                                    <td>{{ address.street }}</td>
                                    <td>{{ address.building_number }}</td>
                                    <td>{{ address.flat_number }}</td>
                                    <td>{{ address.inhabitants }}</td>
                                    <td>
                                        <a href="#" class="btn btn-primary btn-xs" data-toggle="tooltip" title="Edit"><span class="fas fa-user-edit fa-xs"></span></a>
                                    </td>
                                    <td>
                                        <a href="#" class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete"><span class="fas fa-trash-alt fa-xs"></span></a>
                                    </td>
                                    <td>
                                        <a href="#" class="btn btn-info btn-xs" data-toggle="tooltip" title="Info"><span class="fas fa-info xs"></span></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <div class="clearfix"></div>

                    <!-- PAGINATOR START-->
                    {% if is_paginated %}
                        {% if page_obj.has_previous %}
                            <a class="btn btn-outline-info mb-4" href="?page=1&orderby={{ orderby }}&order={{ order }}">First</a>
                            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}&orderby={{ orderby }}&order={{ order }}">Previous</a>
                        {% endif %}
                        {% for num in page_obj.paginator.page_range %}
                            {% if page_obj.number == num %}
                                <a class="btn btn-info mb-4" href="?page={{ num }}&orderby={{ orderby }}&order={{ order }}">{{ num }}</a>
                            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                <a class="btn btn-outline-info mb-4" href="?page={{ num }}&orderby={{ orderby }}&order={{ order }}">{{ num }}</a>
                            {% endif %}
                        {% endfor %}
                        {% if page_obj.has_next %}
                            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}&orderby={{ orderby }}&order={{ order }}">Next</a>
                            <a class="btn btn-outline-info mb-4"
                               href="?page={{ page_obj.paginator.num_pages }}&orderby={{ orderby }}&order={{ order }}">Last</a>
                        {% endif %}
                    {% endif %}
                    <!-- PAGINATOR END -->

                    </div>
                        <a class="btn btn-info mb-4" href="{% url 'person-new' %}">New Contact</a>
                    <div>

                </div>

            </div> <!-- end col-md-12 -->
        </div> <!-- end row -->
    </div>  <!-- end containter -->


{% endblock content %}